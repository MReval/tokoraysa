<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="style.css">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
</head>

<body>
  <nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Raysa Kue</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Beranda</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Produk</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Toko Kami</a>
          </li>
          <li class="nav-item">
            <a class="nav-link disabled" aria-disabled="true">Keranjang</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="container mt-4">
    <h1 class="text-center mb-4">Semua Produk</h1>

    <h2 class="text-center mt-4 mb-3 section-title">Filter & Atur Produk</h2>
    <div class="controls-container mb-4 p-3 border rounded shadow-sm">
      <div class="row g-3 align-items-center">
        <div class="col-lg-7 col-md-12">
          <input type="text" class="form-control" id="search-input" placeholder="Cari berdasarkan nama atau deskripsi...">
        </div>
        <div class="col-lg-5 col-md-12">
          <select class="form-select" id="sort-select">
            <option selected value="default">Urutkan berdasarkan...</option>
            <option value="name-asc">Nama (A-Z)</option>
            <option value="name-desc">Nama (Z-A)</option>
            <option value="price-asc">Harga (Termurah)</option>
            <option value="price-desc">Harga (Termahal)</option>
          </select>
        </div>
      </div>
      <hr class="my-3">
      <div class="row">
        <div class="col-12">
          <p class="text-center mb-2 filter-title">Filter berdasarkan tipe:</p>
          <div class="d-flex justify-content-center flex-wrap" id="filter-controls">
            <button type="button" class="btn btn-outline-primary me-2 mb-2 active" data-filter="all">Semua</button>
            <button type="button" class="btn btn-outline-primary me-2 mb-2" data-filter="goreng">Goreng</button>
            <button type="button" class="btn btn-outline-primary mb-2" data-filter="non-goreng">Non-Goreng</button>
          </div>
        </div>
      </div>
    </div>

    <div id="product-list-container" class="row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-lg-3 g-4">
      <!-- Product cards will be inserted here by JavaScript -->
    </div>
  </div>

<!-- Modal -->
<div class="modal fade" id="productDetailModal" tabindex="-1" aria-labelledby="productDetailModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalProductName">Product Name</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <img src="" alt="Product Image" class="img-fluid mb-3" id="modalProductImage" style="max-height: 400px; display: block; margin-left: auto; margin-right: auto;">
        <p id="modalProductDescription">Product description goes here.</p>
        <p class="fw-bold" id="modalProductPrice">Rp 0,-</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
<script>
  const products = [
    {
      id: 1,
      name: "Wajik",
      price: 90000,
      imageUrl: "assets/wajik.jpg",
      type: "non-goreng",
      description: "Kue wajik legit terbuat dari ketan pilihan, gula merah asli, dan santan kelapa segar. Rasanya manis dan teksturnya kenyal, cocok untuk acara spesial atau sebagai camilan sehari-hari yang memuaskan."
    },
    {
      id: 2,
      name: "Risoles Ayam",
      price: 5000,
      imageUrl: "assets/risoles.jpg",
      type: "goreng",
      description: "Risoles gurih dengan isian daging ayam cincang berkualitas dan campuran sayuran segar seperti wortel dan buncis, dibalut kulit lumpia tipis yang digoreng hingga kuning keemasan. Nikmat disajikan hangat dengan saus sambal."
    },
    {
      id: 3,
      name: "Kue Lumpur",
      price: 3000,
      imageUrl: "assets/kue_lumpur.jpg",
      type: "non-goreng",
      description: "Kue lumpur pandan yang lembut dan wangi menggoda selera, dengan topping kismis manis di atasnya. Manisnya pas dan teksturnya lumer di mulut, favorit semua usia."
    },
    {
      id: 4,
      name: "Pastel",
      price: 4000,
      imageUrl: "assets/pastel.jpg",
      type: "goreng",
      description: "Pastel renyah dengan isian sayuran segar seperti wortel, kentang, bihun, dan potongan telur rebus. Ukurannya pas untuk sekali santap, cocok sebagai teman minum teh atau kopi di sore hari."
    },
    {
      id: 5,
      name: "Bolu Kukus",
      price: 2500,
      imageUrl: "assets/bolu_kukus.jpg",
      type: "non-goreng",
      description: "Bolu kukus mekar dengan warna-warni ceria yang menarik perhatian. Teksturnya sangat lembut dan empuk seperti kapas, disukai semua kalangan usia, dari anak-anak hingga dewasa."
    },
    {
      id: 6,
      name: "Tahu Isi",
      price: 3500,
      imageUrl: "assets/tahu_isi.jpg",
      type: "goreng",
      description: "Tahu goreng kopong pilihan yang diisi dengan adonan sayuran segar seperti tauge dan wortel, serta udang cincang. Gurih dan renyah di luar, lembut dan penuh rasa di dalam."
    }
  ];

  function renderProducts(productsToRender) {
    const productContainer = document.getElementById('product-list-container');
    productContainer.innerHTML = ''; // Clear existing content

    if (productsToRender.length === 0) {
        productContainer.innerHTML = '<div class="col-12"><p class="text-center text-muted mt-5">Tidak ada produk yang cocok dengan kriteria Anda.</p></div>';
        return;
    }

    productsToRender.forEach(product => {
      const cardHtml = `
        <div class="col">
          <div class="card h-100 shadow-sm product-card">
            <img src="${product.imageUrl}" class="card-img-top product-card-img" alt="${product.name}">
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">${product.name}</h5>
              <p class="card-text flex-grow-1 small product-description">${product.description.substring(0, 90)}${product.description.length > 90 ? '...' : ''}</p>
              <p class="card-text fw-bold mt-2 product-price">Rp ${product.price},-</p>
              <button type="button" class="btn btn-primary btn-sm mt-auto view-details-btn" data-product-id="${product.id}" data-bs-toggle="modal" data-bs-target="#productDetailModal">Lihat Detail</button>
            </div>
          </div>
        </div>
      `;
      productContainer.innerHTML += cardHtml;
    });
  }

  let currentFilter = 'all'; // Variable to store the current filter

  function applyFiltersAndSearch() {
    const searchTerm = document.getElementById('search-input').value.toLowerCase();
    const sortValue = document.getElementById('sort-select').value;
    let currentProducts = [...products];

    // Apply filter
    if (currentFilter !== 'all') {
      currentProducts = currentProducts.filter(product => product.type === currentFilter);
    }

    // Apply search
    if (searchTerm) {
      currentProducts = currentProducts.filter(product =>
        product.name.toLowerCase().includes(searchTerm) ||
        product.description.toLowerCase().includes(searchTerm)
      );
    }

    // Apply sort
    if (sortValue === 'name-asc') {
      currentProducts.sort((a, b) => a.name.localeCompare(b.name));
    } else if (sortValue === 'name-desc') {
      currentProducts.sort((a, b) => b.name.localeCompare(a.name));
    } else if (sortValue === 'price-asc') {
      currentProducts.sort((a, b) => a.price - b.price);
    } else if (sortValue === 'price-desc') {
      currentProducts.sort((a, b) => b.price - a.price);
    }
    // If 'default', no sort needed beyond original order or previous steps

    renderProducts(currentProducts);
  }

  // Initial render
  applyFiltersAndSearch();

  // Filter logic
  const filterButtons = document.querySelectorAll('#filter-controls button');
  filterButtons.forEach(button => {
    button.addEventListener('click', () => {
      filterButtons.forEach(btn => btn.classList.remove('active'));
      button.classList.add('active');
      currentFilter = button.getAttribute('data-filter');
      applyFiltersAndSearch();
    });
  });

  // Search logic
  const searchInput = document.getElementById('search-input');
  searchInput.addEventListener('input', applyFiltersAndSearch);

  // Sort logic
  const sortSelect = document.getElementById('sort-select');
  sortSelect.addEventListener('change', applyFiltersAndSearch);

  // Modal population logic
  const productListContainer = document.getElementById('product-list-container');
  const modalProductName = document.getElementById('modalProductName');
  const modalProductImage = document.getElementById('modalProductImage');
  const modalProductDescription = document.getElementById('modalProductDescription');
  const modalProductPrice = document.getElementById('modalProductPrice');

  productListContainer.addEventListener('click', function(event) {
    const targetButton = event.target.closest('.view-details-btn'); // Ensure clicks on button icon/text also trigger
    if (targetButton) {
      const productId = parseInt(targetButton.dataset.productId);
      const product = products.find(p => p.id === productId);

      if (product) {
        modalProductName.textContent = product.name;
        modalProductImage.src = product.imageUrl;
        modalProductImage.alt = product.name;
        modalProductDescription.textContent = product.description;
        modalProductPrice.textContent = `Rp ${product.price},-`;
      }
    }
  });
</script>
</body>

</html>